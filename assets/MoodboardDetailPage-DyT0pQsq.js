import{e as _,f as H,r as o,g as m,b as R,d as W,j as e,L as x,B as l,H as D,i as O,k as F}from"./index-fZ_4v1pA.js";import{B as q}from"./badge-D-0GamXg.js";import{P as V}from"./ProductCard-BANgJTKR.js";import{S as G}from"./ShareButton-Gy1GMV_a.js";import{S as u}from"./SEO-CJ6FqJ39.js";import{m as S}from"./moodboards.api-CSZKZZYZ.js";import{b as J}from"./admin.api-C7JOjN0i.js";import{A as h}from"./arrow-left-CBAx9yF3.js";import{S as K,E as Q}from"./square-pen-CyekwJGC.js";import{E as X}from"./eye-CL2tiTt8.js";import"./index-C24RUjyj.js";import"./dropdown-menu-Mh0D0jpL.js";import"./message-circle-hOTgRet_.js";function me(){var N,w,y,k,P;const{id:i}=_(),T=H(),[s,b]=o.useState(null),[E,g]=o.useState(!0),[p,f]=o.useState(!1),[d,j]=o.useState(null),[A,L]=o.useState(!1),c=m(a=>a.favorites),M=m(a=>a.addToFavorites),$=m(a=>a.removeFromFavorites),{isAuthenticated:B}=R(),{toast:v}=W();if(o.useEffect(()=>{(async()=>{if(i){g(!0),j(null);try{let t=await S.getMoodboardBySlug(i);t||(t=await S.getMoodboardById(i)),b(t),t&&O(t.id,t.title)}catch(t){console.error("Failed to fetch moodboard:",t),j("Failed to load moodboard. Please try again.")}finally{g(!1)}}})()},[i]),E)return e.jsxs(e.Fragment,{children:[e.jsx(u,{title:"Loading..."}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"border-b border-neutral-200 sticky top-14 bg-surface/95 backdrop-blur-sm z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs(x,{to:"/moodboards",className:"inline-flex items-center text-neutral-600 hover:text-primary transition-colors duration-200",children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Back to Collections"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-16",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"aspect-[16/9] md:aspect-[21/9] bg-neutral-200 rounded-lg mb-8"}),e.jsxs("div",{className:"flex gap-6 mb-12",children:[e.jsx("div",{className:"h-16 bg-neutral-200 rounded w-32"}),e.jsx("div",{className:"h-16 bg-neutral-200 rounded w-32"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(4)].map((a,t)=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-[3/4] bg-neutral-200 rounded-lg"}),e.jsx("div",{className:"h-4 bg-neutral-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-neutral-200 rounded w-1/2"})]},t))})]})})]})]});if(d||!s)return e.jsxs(e.Fragment,{children:[e.jsx(u,{title:"Moodboard Not Found"}),e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center px-4",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full bg-neutral-100 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"ðŸ“¸"})}),e.jsx("h1",{className:"font-display text-2xl text-neutral-900 mb-3",children:d?"Error Loading Moodboard":"Moodboard Not Found"}),e.jsx("p",{className:"text-neutral-600 mb-6",children:d||"This collection doesn't exist or may have been removed."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(x,{to:"/moodboards",children:e.jsxs(l,{children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Browse All Looks"]})}),d&&e.jsx(l,{variant:"outline",onClick:()=>window.location.reload(),children:"Try Again"})]})]})})]});const r=((N=s.products)==null?void 0:N.filter(a=>a&&a.id))||[],n=r.every(a=>c.some(t=>t.id===a.id)),C=()=>{r.forEach(a=>{c.some(t=>t.id===a.id)||M(a)}),s&&F.track({event:"moodboard_save_all",resourceType:"moodboard",resourceId:s.id,metadata:{moodboardTitle:s.title,productCount:r.length}})},I=()=>{r.forEach(a=>{c.some(t=>t.id===a.id)&&$(a.id)}),s&&F.track({event:"moodboard_remove_all",resourceType:"moodboard",resourceId:s.id,metadata:{moodboardTitle:s.title,productCount:r.length}})},z=async()=>{if(s){f(!0);try{const a=!s.isPublished;await J.publishMoodboard(s.id,a),b({...s,isPublished:a}),v({title:"Success",description:`Moodboard ${a?"published":"unpublished"} successfully`})}catch{v({title:"Error",description:"Failed to update moodboard status",variant:"destructive"})}finally{f(!1)}}},U=()=>{s&&T(`/admin/moodboards/edit/${s.id}`)};return e.jsxs(e.Fragment,{children:[e.jsx(u,{title:s.title,description:s.description||`Explore the ${s.title} collection featuring ${r.length} curated pieces. ${((w=s.stylingTips)==null?void 0:w[0])||""}`,image:s.coverImage,url:`https://thelookbookbymimi.com/moodboards/${s.slug}`,type:"article"}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"border-b border-neutral-200 sticky top-14 bg-surface/95 backdrop-blur-sm z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs(x,{to:"/moodboards",className:"inline-flex items-center text-neutral-600 hover:text-primary transition-colors duration-200",children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Back to Collections"})]})})}),e.jsx("section",{className:"relative bg-neutral-900",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"relative aspect-[16/9] md:aspect-[21/9]",children:[e.jsx("div",{className:`absolute inset-0 bg-neutral-200 transition-opacity duration-500 ${A?"opacity-0":"opacity-100"}`}),e.jsx("img",{src:s.coverImage,alt:`${s.title} - Curated moodboard cover featuring ${((y=s.tags)==null?void 0:y.join(", "))||"curated"} aesthetic`,onLoad:()=>L(!0),className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-neutral-900/80 via-neutral-900/20 to-transparent"}),s.isPublished===!1&&e.jsx("div",{className:"absolute top-6 left-6 bg-yellow-500/90 text-yellow-950 px-4 py-2 rounded-lg text-sm font-semibold shadow-lg backdrop-blur-sm",children:"UNPUBLISHED"}),B&&e.jsxs("div",{className:"absolute top-6 right-6 flex gap-2 z-50",children:[e.jsxs(l,{variant:"secondary",size:"sm",onClick:U,className:"bg-white/90 hover:bg-white text-foreground backdrop-blur-sm shadow-lg cursor-pointer",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsx(l,{variant:s.isPublished===!1?"default":"secondary",size:"sm",onClick:z,disabled:p,className:`cursor-pointer ${s.isPublished!==!1?"bg-white/90 hover:bg-white text-foreground backdrop-blur-sm shadow-lg":"backdrop-blur-sm shadow-lg"}`,children:p?e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"animate-spin mr-2",children:"â³"}),s.isPublished===!1?"Publishing...":"Unpublishing..."]}):s.isPublished===!1?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Publish"]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Unpublish"]})})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 md:p-8",children:e.jsxs("div",{className:"max-w-4xl",children:[s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:(k=s.tags)==null?void 0:k.map(a=>e.jsxs(q,{variant:"secondary",className:"bg-white/20 text-white border-white/30 backdrop-blur-sm text-xs",children:["#",a]},a))}),e.jsx("h1",{className:"font-display text-3xl md:text-4xl lg:text-5xl font-medium text-white mb-3",children:s.title}),s.description&&e.jsx("p",{className:"text-white/90 text-lg md:text-xl max-w-2xl",children:s.description})]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:items-center sm:justify-between mb-12",children:[e.jsx("div",{className:"flex gap-6",children:e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("div",{className:"text-3xl font-bold text-foreground",children:r.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Curated Pieces"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(l,{onClick:n?I:C,variant:n?"outline":"default",className:"w-full sm:w-auto",children:[e.jsx(D,{className:`mr-2 h-4 w-4 ${n?"fill-current":""}`}),n?"Remove All":"Save All"]}),e.jsx(G,{title:s.title,description:s.description,imageUrl:s.coverImage,url:`${window.location.origin}/moodboards/${s.slug}`,type:"moodboard",variant:"outline",size:"default",showLabel:!0,className:"w-full sm:w-auto"})]})]}),s.stylingTips&&s.stylingTips.length>0&&e.jsxs("div",{className:"mb-12 bg-secondary/30 p-6 rounded-lg",children:[e.jsx("h2",{className:"font-display text-2xl font-medium text-foreground mb-4",children:"Styling Tips"}),e.jsx("ul",{className:"space-y-2",children:(P=s.stylingTips)==null?void 0:P.map((a,t)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-accent mr-3 mt-1",children:"â€¢"}),e.jsx("span",{className:"text-muted-foreground",children:a})]},t))})]}),s.howToWear&&e.jsxs("div",{className:"mb-12 bg-accent/10 p-6 rounded-lg border border-accent/20",children:[e.jsx("h2",{className:"font-display text-2xl font-medium text-foreground mb-4",children:"How to Wear"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s.howToWear})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-2xl font-medium text-foreground mb-6",children:"Shop This Look"}),r.length>0?e.jsx("div",{className:"grid-mobile-products gap-4 sm:gap-6 mb-6 sm:mb-8",children:r.map(a=>e.jsx(V,{product:a},a.id))}):e.jsx("p",{className:"text-muted-foreground text-center py-12",children:"No products in this moodboard yet."})]})]})]})]})}export{me as default};
