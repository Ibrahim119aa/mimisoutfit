import{c as T,j as e,b as C,r as c,B as m,d as F,e as z,f as D,g as U,L as v,H as B}from"./index-D3NDjr5B.js";import{P as L}from"./ProductCard-CreX3PBE.js";import{O,S as R}from"./ShareButton-CCU5gDqq.js";import{D as H,a as q,b as W,c as P}from"./dropdown-menu-DdC2iEtp.js";import{M as S}from"./message-circle-CJaOG4EY.js";import{M as _}from"./mail-BwJH3fMr.js";import{S as V}from"./SEO-BaS7uEy3.js";import{p as Y}from"./products.api-Q-JVvUOW.js";import{a as G}from"./admin.api-JLzlyybJ.js";import{A as M}from"./arrow-left-D_gjuqPL.js";import{S as J,E as k}from"./square-pen-CNJ5w3Zp.js";import{E as K}from"./eye-DnRMw2Xi.js";import{S as Q}from"./shopping-bag-Dp3Qb2dM.js";import"./index-C24RUjyj.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Z=T("message-square",X);function ee(){return e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-10 w-24 bg-neutral-200 rounded-full mb-8"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 lg:gap-12",children:[e.jsx("div",{className:"aspect-[3/4] bg-neutral-200 rounded-lg"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-4 bg-neutral-200 rounded w-1/4"}),e.jsx("div",{className:"h-8 bg-neutral-200 rounded w-3/4"}),e.jsx("div",{className:"h-6 bg-neutral-200 rounded w-1/3"}),e.jsxs("div",{className:"space-y-3 pt-4",children:[e.jsx("div",{className:"h-4 bg-neutral-200 rounded w-full"}),e.jsx("div",{className:"h-4 bg-neutral-200 rounded w-full"}),e.jsx("div",{className:"h-4 bg-neutral-200 rounded w-5/6"})]}),e.jsxs("div",{className:"flex gap-4 pt-6",children:[e.jsx("div",{className:"h-12 bg-neutral-200 rounded-full flex-1"}),e.jsx("div",{className:"h-12 w-12 bg-neutral-200 rounded-full"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-6",children:[e.jsx("div",{className:"h-8 bg-neutral-200 rounded-full w-20"}),e.jsx("div",{className:"h-8 bg-neutral-200 rounded-full w-24"}),e.jsx("div",{className:"h-8 bg-neutral-200 rounded-full w-16"})]})]})]})]})}function se({product:t,variant:N="default",size:s="lg",className:u=""}){const{toast:d}=C(),[l,o]=c.useState(!1),h=()=>{let a=`Hi Mimi! ðŸ‘‹

`;return a+=`I'm interested in purchasing from your collection:

`,a+=`*${t.brand?`${t.brand} `:""}${t.name}*

`,t.description&&(a+=`${t.description}

`),t.price&&(a+=`ðŸ’° *Price:* $${t.price}

`),a+=`ðŸ”— Product link: ${window.location.href}

`,a+="Is this item currently available? ðŸ’¼",a},w=()=>{const a=`Inquiry: ${t.brand?`${t.brand} `:""}${t.name}`;let i=`Hi Mimi,

`;return i+=`I'm interested in purchasing the following item from your collection:

`,i+=`Product: ${t.brand?`${t.brand} `:""}${t.name}
`,t.price&&(i+=`Price: $${t.price}
`),t.description&&(i+=`Description: ${t.description}
`),i+=`Product Link: ${window.location.href}

`,i+=`Is this item currently available? I'd love to know more about it.

`,i+=`Thank you!
`,{subject:a,body:i}},j=()=>{o(!0);const a=h(),i=encodeURIComponent(a),n="15551234567";if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){const g=/iPhone|iPad|iPod/i.test(navigator.userAgent)?"&":"";window.location.href=`sms:${n}?${g}body=${i}`,d({title:"Opening Messages...",description:"Pre-filled with product details"})}else navigator.clipboard.writeText(n),d({title:"Phone Number Copied!",description:`Text Mimi at: ${n}`});o(!1)},f=()=>{o(!0);const a=h(),i=encodeURIComponent(a),n="15551234567";/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href=`whatsapp://send?phone=${n}&text=${i}`:window.open(`https://web.whatsapp.com/send?phone=${n}&text=${i}`,"_blank"),d({title:"Opening WhatsApp...",description:"Contact Mimi about this product"}),o(!1)},p=()=>{o(!0);const{subject:a,body:i}=w(),n=encodeURIComponent(a),x=encodeURIComponent(i),g="hello@thelookbookbymimi.com";window.location.href=`mailto:${g}?subject=${n}&body=${x}`,d({title:"Opening Email...",description:"Pre-filled with product details"}),o(!1)};return e.jsxs(H,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(m,{variant:N,size:s,disabled:l,className:u,children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Contact Mimi to Purchase"]})}),e.jsxs(W,{align:"center",className:"w-56",children:[e.jsxs(P,{onClick:j,disabled:l,className:"cursor-pointer",children:[e.jsx(Z,{className:"mr-2 h-4 w-4 text-blue-600"}),e.jsx("span",{children:"Text Message (SMS)"})]}),e.jsxs(P,{onClick:f,disabled:l,className:"cursor-pointer",children:[e.jsx(S,{className:"mr-2 h-4 w-4 text-green-600"}),e.jsx("span",{children:"WhatsApp"})]}),e.jsxs(P,{onClick:p,disabled:l,className:"cursor-pointer",children:[e.jsx(_,{className:"mr-2 h-4 w-4 text-accent"}),e.jsx("span",{children:"Email"})]})]})]})}function ge(){var y;const{slug:t}=F(),N=z(),[s,u]=c.useState(null),[d,l]=c.useState([]),[o,h]=c.useState(!0),[w,j]=c.useState(!1),[f,p]=c.useState(null),{isFavorite:a,addToFavorites:i,removeFromFavorites:n}=D(),{user:x}=U(),{toast:g}=C();if(c.useEffect(()=>{(async()=>{if(!t){p("No product slug provided"),h(!1);return}try{h(!0),p(null);const b=await Y.getProductBySlug(t,!0);b?(u(b.product),l(b.relatedProducts||[])):(p("Product not found"),u(null),l([]))}catch(b){console.error("Error fetching product:",b),p("Failed to load product. Please try again later."),u(null),l([])}finally{h(!1)}})()},[t]),o)return e.jsx("div",{className:"min-h-screen",children:e.jsx("div",{className:"container-custom section-padding",children:e.jsx(ee,{})})});if(f||!s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"font-display text-2xl font-medium text-foreground mb-4",children:f||"Product Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:f?"There was an error loading the product. Please try again.":"The product you're looking for doesn't exist or has been removed."}),e.jsx(m,{asChild:!0,children:e.jsxs(v,{to:"/products",children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Back to Products"]})})]})});const $=a(s.id),E=()=>{$?n(s.id):i(s)},I=async()=>{if(s){j(!0);try{const r=!s.isPublished;await G.publishProduct(s.id,r),u({...s,isPublished:r}),g({title:"Success",description:`Product ${r?"published":"unpublished"} successfully`})}catch{g({title:"Error",description:"Failed to update product status",variant:"destructive"})}finally{j(!1)}}},A=()=>{s&&N(`/admin/products/edit/${s.id}`)};return e.jsxs(e.Fragment,{children:[e.jsx(V,{title:`${s.brand} ${s.name}`,description:s.description||`Shop ${s.brand} ${s.name} - ${s.category}. ${s.price?`$${s.price}`:"Available now"}.`,image:s.imageUrl,url:`https://thelookbookbymimi.com/products/${s.slug}`,type:"product"}),e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"container-custom section-padding",children:[e.jsx(m,{variant:"ghost",asChild:!0,className:"mb-8",children:e.jsxs(v,{to:"/products",children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Back to Products"]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 lg:gap-12",children:[e.jsx(O,{src:s.imageUrl,alt:`${s.brand} ${s.name} - ${s.category} product detail view`,aspectRatio:"3/4",className:"rounded-lg",priority:!0,sizes:"(max-width: 768px) 100vw, 50vw"}),e.jsxs("div",{className:"flex flex-col",children:[x&&e.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-4 border-b",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:A,className:"flex-1",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Edit Product"]}),e.jsx(m,{variant:s.isPublished===!1?"default":"outline",size:"sm",onClick:I,disabled:w,className:"flex-1",children:s.isPublished===!1?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Publish"]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Unpublish"]})})]}),x&&s.isPublished===!1&&e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-yellow-100 text-yellow-800 rounded-lg mb-4 text-sm font-medium w-fit",children:[e.jsx(k,{className:"h-4 w-4"}),"UNPUBLISHED"]}),s.brand&&e.jsx("p",{className:"text-sm uppercase tracking-wider text-muted-foreground mb-2",children:s.brand}),e.jsx("h1",{className:"font-display text-3xl lg:text-4xl font-medium text-foreground mb-4",children:s.name}),s.price!==null&&e.jsxs("p",{className:"text-2xl font-medium text-accent mb-6",children:["$",s.price]}),s.description&&e.jsx("p",{className:"text-muted-foreground leading-relaxed mb-8",children:s.description}),e.jsxs("div",{className:"flex gap-4 mb-8",children:[s.purchaseType==="direct"?e.jsx(se,{product:s,variant:"default",size:"lg",className:"flex-1"}):e.jsx(m,{asChild:!0,size:"lg",className:"flex-1",children:e.jsxs(v,{to:`/go/${s.id}`,children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Shop Now"]})}),e.jsx(m,{variant:"outline",size:"lg",onClick:E,className:"px-4",children:e.jsx(B,{className:`h-5 w-5 ${$?"fill-current text-red-500":""}`})}),e.jsx(R,{title:`${s.brand} ${s.name}`,description:s.description,price:s.price!==null?`$${s.price}`:void 0,imageUrl:s.imageUrl,url:`${window.location.origin}/products/${s.slug}`,type:"product",variant:"outline",size:"lg",showLabel:!1})]}),s.tags&&s.tags.length>0&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-sm font-medium mb-3",children:"Style Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(y=s.tags)==null?void 0:y.map(r=>e.jsxs("span",{className:"px-3 py-1 bg-neutral-100 text-neutral-700 text-sm rounded-full",children:["#",r]},r))})]}),s.category&&e.jsxs("div",{className:"border-t pt-6 mt-6",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Category"}),e.jsx("p",{className:"text-muted-foreground capitalize",children:s.category})]})]})]}),d.length>0&&e.jsxs("div",{className:"mt-16 pt-16 border-t",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"font-display text-3xl font-medium text-foreground mb-4",children:"You May Also Like"}),e.jsx("p",{className:"text-muted-foreground",children:"Discover similar pieces that complement your style"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:d.map(r=>e.jsx(L,{product:r},r.id))})]})]})})]})}export{ge as default};
