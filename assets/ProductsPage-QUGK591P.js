import{c as k,j as e,B as g,r as a,a as B,X as I,u as D,b as H,t as U}from"./index-Qx7ctAR2.js";import{I as A}from"./input-CnM6X11f.js";import{S as w,a as S,b as P,c as C,d as j}from"./select-C4vy7qot.js";import{P as R}from"./ProductCard-Br2qgcW9.js";import{S as q}from"./SkeletonCard-BdDkCFiu.js";import{S as G}from"./SectionHeader-ewKu5VD7.js";import{g as Z,a as J,P as X,D as L}from"./pagination.utils-CpXb1ZVg.js";import{C as K}from"./dropdown-menu-CEi7-3xO.js";import{S as Q}from"./search-CgVacnWW.js";import{S as W}from"./sparkles-CDvuDTZD.js";import{S as Y}from"./SEO--jquLTE9.js";import{p as E}from"./products.api-DatHf7P2.js";import"./index-Cv7ubkdg.js";import"./ShareButton-dM5l3E_x.js";import"./index-C24RUjyj.js";import"./message-circle-DXhQ8rnq.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],se=k("chevron-left",ee);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],ae=k("chevrons-left",te);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],le=k("chevrons-right",re);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],ce=k("sliders-horizontal",ie);function oe(l){const i=l.toLowerCase().trim().split(/\s+/);for(const c of i){if(c.length<=2)continue;const d=(c.match(/[aeiou]/g)||[]).length;if(c.length>4&&d===0||/[bcdfghjklmnpqrstvwxyz]{4,}/.test(c))return!0}return!1}function ne({pagination:l,onPageChange:i,onPageSizeChange:c,showPageSize:d=!0,className:b=""}){const{page:u,totalPages:t,hasNextPage:o,hasPrevPage:m}=l,h=Z(u,t);return t<=1?null:e.jsxs("div",{className:`flex flex-col sm:flex-row items-center justify-between gap-4 ${b}`,children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:J(l)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{variant:"outline",size:"icon",onClick:()=>i(1),disabled:!m,className:"hidden sm:flex touch-target","aria-label":"First page",children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx(g,{variant:"outline",size:"icon",onClick:()=>i(u-1),disabled:!m,className:"touch-target","aria-label":"Previous page",children:e.jsx(se,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center gap-1",children:h.map((r,n)=>{if(r==="...")return e.jsx("span",{className:"px-2 text-muted-foreground",children:"..."},`ellipsis-${n}`);const f=r,x=f===u;return e.jsx(g,{variant:x?"default":"outline",size:"icon",onClick:()=>i(f),className:`touch-target ${x?"pointer-events-none":""}`,"aria-label":`Page ${f}`,"aria-current":x?"page":void 0,children:f},f)})}),e.jsx(g,{variant:"outline",size:"icon",onClick:()=>i(u+1),disabled:!o,className:"touch-target","aria-label":"Next page",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx(g,{variant:"outline",size:"icon",onClick:()=>i(t),disabled:!o,className:"hidden sm:flex touch-target","aria-label":"Last page",children:e.jsx(le,{className:"h-4 w-4"})})]}),d&&c&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Per page:"}),e.jsxs(w,{value:l.limit.toString(),onValueChange:r=>c(Number(r)),children:[e.jsx(S,{className:"w-20 h-9 touch-target",children:e.jsx(P,{})}),e.jsx(C,{children:X.map(r=>e.jsx(j,{value:r.toString(),children:r},r))})]})]})]})}function de({value:l="",onChange:i,placeholder:c="Search...",debounceMs:d=300,className:b,showClearButton:u=!0,showFuzzyHint:t=!0}){const[o,m]=a.useState(l),[h,r]=a.useState(!1);a.useEffect(()=>{m(l)},[l]),a.useEffect(()=>{if(t&&o.length>=3){const x=oe(o);r(x)}else r(!1)},[o,t]),a.useEffect(()=>{const x=setTimeout(()=>{o!==l&&i(o)},d);return()=>clearTimeout(x)},[o,d,i,l]);const n=a.useCallback(()=>{m(""),i(""),r(!1)},[i]),f=a.useCallback(x=>{m(x.target.value)},[]);return e.jsxs("div",{className:B("relative flex-1",b),children:[e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4 pointer-events-none"}),e.jsx(A,{type:"text",placeholder:c,value:o,onChange:f,className:B("pl-10 pr-10 h-11 touch-target",h&&"border-primary/50"),"aria-label":"Search input"}),u&&o&&e.jsx(g,{variant:"ghost",size:"sm",onClick:n,className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 hover:bg-muted rounded-full touch-target","aria-label":"Clear search",children:e.jsx(I,{className:"h-4 w-4"})})]}),h&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 px-3 py-2 bg-primary/5 border border-primary/20 rounded-md text-xs text-muted-foreground flex items-center gap-2 animate-in fade-in slide-in-from-top-1 duration-200",children:[e.jsx(W,{className:"h-3 w-3 text-primary"}),e.jsx("span",{children:"Using smart search to find similar matches"})]})]})}function me(l){const[i,c]=a.useState([]),[d,b]=a.useState({page:1,limit:L,total:0,totalPages:0,hasNextPage:!1,hasPrevPage:!1}),[u,t]=a.useState(!0),[o,m]=a.useState(null);return a.useEffect(()=>{let h=!0;return(async()=>{try{t(!0),m(null);const n=await E.getAllProducts(l);h&&(c(n.data),b(n.pagination))}catch(n){h&&m(n instanceof Error?n:new Error("Failed to fetch products"))}finally{h&&t(!1)}})(),()=>{h=!1}},[JSON.stringify(l)]),{products:i,pagination:d,loading:u,error:o}}function he(l){const[i,c]=a.useState({...l,page:1,limit:L}),{products:d,pagination:b,loading:u,error:t}=me(i),o=a.useCallback(r=>{c(n=>({...n,page:r})),window.scrollTo({top:0,behavior:"smooth"})},[]),m=a.useCallback(r=>{c(n=>({...n,limit:r,page:1}))},[]),h=a.useCallback(r=>{c(n=>({...r,page:1,limit:n.limit}))},[]);return{products:d,pagination:b,loading:u,error:t,filters:i,setPage:o,setPageSize:m,updateFilters:h}}function Ae(){const l=D(),{isAuthenticated:i}=H(),[c,d]=a.useState(!1),[b,u]=a.useState(!1),[t,o]=a.useState({sortBy:"newest"}),[m,h]=a.useState([]),[r,n]=a.useState([]),{products:f,pagination:x,loading:y,error:z,setPage:T,setPageSize:$,updateFilters:_}=he(t),v=a.useMemo(()=>f,[f]);a.useEffect(()=>{(async()=>{try{const[p,O]=await Promise.all([E.getCategories(),E.getBrands()]);h(p),n(O)}catch(p){console.error("Failed to load filter options:",p)}})()},[]);const N=s=>{const p={...t,...s};o(p),_(p)},V=s=>{N({search:s||void 0})};a.useEffect(()=>{t.search&&!y&&v&&U(t.search,v.length,"products")},[t.search,y,v]);const F=()=>{const s={sortBy:"newest"};o(s),_(s)},M=t.search||t.category||t.brand||t.minPrice!==void 0||t.maxPrice!==void 0;return e.jsxs(e.Fragment,{children:[e.jsx(Y,{title:"Shop All Products",description:"Browse our curated collection of fashion from high-end to accessible brands. Find clothing, shoes, accessories, and more with detailed styling guides.",url:"http://localhost:3000/products"}),e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"container-custom mobile-container mobile-section",children:[e.jsx(G,{title:"All Products",subtitle:"Discover our complete collection of curated fashion pieces",className:"mb-8 sm:mb-12"}),e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4",children:[e.jsx(de,{value:t.search||"",onChange:V,placeholder:"Search products, brands, or styles...",debounceMs:400,className:"flex-1"}),e.jsxs(w,{value:t.sortBy,onValueChange:s=>N({sortBy:s}),children:[e.jsx(S,{className:"w-full sm:w-48 h-11 touch-target",children:e.jsx(P,{placeholder:"Sort by..."})}),e.jsxs(C,{children:[e.jsx(j,{value:"newest",children:"Newest"}),e.jsx(j,{value:"price-low",children:"Price: Low to High"}),e.jsx(j,{value:"price-high",children:"Price: High to Low"}),e.jsx(j,{value:"name",children:"Name"})]})]}),e.jsxs(g,{variant:"outline",onClick:()=>d(!c),className:"w-full sm:w-auto touch-target h-11",children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Filters"]})]}),c&&e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 sm:p-6 space-y-4 animate-fadeIn shadow-lg relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium text-base sm:text-lg",children:"Filters"}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>d(!1),className:"touch-target -mr-2",children:e.jsx(I,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium block",children:"Category"}),e.jsxs(w,{value:t.category||"all",onValueChange:s=>N({category:s==="all"?void 0:s}),children:[e.jsx(S,{className:"h-10 touch-target",children:e.jsx(P,{placeholder:"All categories"})}),e.jsxs(C,{className:"z-50",children:[e.jsx(j,{value:"all",children:"All categories"}),m.map(s=>{var p;return e.jsx(j,{value:s,children:((p=s==null?void 0:s.charAt(0))==null?void 0:p.toUpperCase())+(s==null?void 0:s.slice(1))},s)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium block",children:"Brand"}),e.jsxs(w,{value:t.brand||"all",onValueChange:s=>N({brand:s==="all"?void 0:s}),children:[e.jsx(S,{className:"h-10 touch-target",children:e.jsx(P,{placeholder:"All brands"})}),e.jsxs(C,{className:"z-50",children:[e.jsx(j,{value:"all",children:"All brands"}),r.map(s=>e.jsx(j,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium block",children:"Min Price"}),e.jsx(A,{type:"number",placeholder:"$0",value:t.minPrice||"",onChange:s=>N({minPrice:s.target.value?Number(s.target.value):void 0}),className:"h-10 touch-target"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium block",children:"Max Price"}),e.jsx(A,{type:"number",placeholder:"$1000",value:t.maxPrice||"",onChange:s=>N({maxPrice:s.target.value?Number(s.target.value):void 0}),className:"h-10 touch-target"})]})]}),M&&e.jsx("div",{className:"pt-4 border-t border-border",children:e.jsx(g,{variant:"outline",onClick:F,className:"w-full sm:w-auto touch-target",children:"Clear All Filters"})})]})]}),z&&e.jsxs("div",{className:"text-center py-12 sm:py-16",children:[e.jsx("p",{className:"text-base sm:text-lg text-muted-foreground mb-4",children:"No products found matching your criteria"}),e.jsx(g,{variant:"outline",className:"btn-mobile",onClick:F,children:"Clear Filters"})]}),y&&e.jsx("div",{className:"grid-mobile-products gap-4 sm:gap-6",children:[...Array(12)].map((s,p)=>e.jsx(q,{},p))}),!y&&!z&&e.jsx(e.Fragment,{children:v.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid-mobile-products gap-4 sm:gap-6 mb-8",children:v.map(s=>e.jsx(R,{product:s},s.id))}),e.jsx(ne,{pagination:x,onPageChange:T,onPageSizeChange:$,showPageSize:!l,className:"mt-8 mb-12"})]}):e.jsxs("div",{className:"text-center py-12 sm:py-16",children:[e.jsx("p",{className:"text-base sm:text-lg text-muted-foreground mb-4",children:"No products found matching your criteria"}),e.jsx(g,{variant:"outline",className:"btn-mobile",onClick:F,children:"Clear Filters"})]})})]})})]})}export{Ae as default};
