import{c as H,r as t,j as e,a as B,B as b,X as z,u as U,t as _}from"./index-D3NDjr5B.js";import{I as k}from"./input-BdVIbqQ3.js";import{S,a as w,b as P,c as C,d as g}from"./select-C-iFrNM3.js";import{P as O}from"./ProductCard-CreX3PBE.js";import{S as q}from"./SkeletonCard-DsZGR2EW.js";import{S as $}from"./SectionHeader-BnyDhwTA.js";import{D as I,P as G}from"./Pagination-CZdkaaXY.js";import{S as J}from"./search-B-Nupm7w.js";import{S as R}from"./sparkles-BGaJhE7x.js";import{S as X}from"./SEO-BaS7uEy3.js";import{p as F}from"./products.api-Q-JVvUOW.js";import"./dropdown-menu-DdC2iEtp.js";import"./index-C8hAjUGN.js";import"./ShareButton-CCU5gDqq.js";import"./index-C24RUjyj.js";import"./message-circle-CJaOG4EY.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],K=H("sliders-horizontal",Z);function Q(i){const o=i.toLowerCase().trim().split(/\s+/);for(const l of o){if(l.length<=2)continue;const p=(l.match(/[aeiou]/g)||[]).length;if(l.length>4&&p===0||/[bcdfghjklmnpqrstvwxyz]{4,}/.test(l))return!0}return!1}function W({value:i="",onChange:o,placeholder:l="Search...",debounceMs:p=300,className:f,showClearButton:a=!0,showFuzzyHint:u=!0}){const[c,h]=t.useState(i),[d,n]=t.useState(!1);t.useEffect(()=>{h(i)},[i]),t.useEffect(()=>{if(u&&c.length>=3){const x=Q(c);n(x)}else n(!1)},[c,u]),t.useEffect(()=>{const x=setTimeout(()=>{c!==i&&o(c)},p);return()=>clearTimeout(x)},[c,p,o,i]);const r=t.useCallback(()=>{h(""),o(""),n(!1)},[o]),y=t.useCallback(x=>{h(x.target.value)},[]);return e.jsxs("div",{className:B("relative flex-1",f),children:[e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4 pointer-events-none"}),e.jsx(k,{type:"text",placeholder:l,value:c,onChange:y,className:B("pl-10 pr-10 h-11 touch-target",d&&"border-primary/50"),"aria-label":"Search input"}),a&&c&&e.jsx(b,{variant:"ghost",size:"sm",onClick:r,className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 hover:bg-muted rounded-full touch-target","aria-label":"Clear search",children:e.jsx(z,{className:"h-4 w-4"})})]}),d&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 px-3 py-2 bg-primary/5 border border-primary/20 rounded-md text-xs text-muted-foreground flex items-center gap-2 animate-in fade-in slide-in-from-top-1 duration-200",children:[e.jsx(R,{className:"h-3 w-3 text-primary"}),e.jsx("span",{children:"Using smart search to find similar matches"})]})]})}function Y(i){const[o,l]=t.useState([]),[p,f]=t.useState({page:1,limit:I,totalCount:0,totalPages:0,hasNextPage:!1,hasPrevPage:!1}),[a,u]=t.useState(!0),[c,h]=t.useState(null);return t.useEffect(()=>{let d=!0;return(async()=>{try{u(!0),h(null);const r=await F.getAllProducts(i);d&&(l(r.data),f(r.pagination))}catch(r){d&&h(r instanceof Error?r:new Error("Failed to fetch products"))}finally{d&&u(!1)}})(),()=>{d=!1}},[JSON.stringify(i)]),{products:o,pagination:p,loading:a,error:c}}function ee(i){const[o,l]=t.useState({...i,page:1,limit:I}),{products:p,pagination:f,loading:a,error:u}=Y(o),c=t.useCallback(n=>{l(r=>({...r,page:n})),window.scrollTo({top:0,behavior:"smooth"})},[]),h=t.useCallback(n=>{l(r=>({...r,limit:n,page:1}))},[]),d=t.useCallback(n=>{l(r=>({...n,page:1,limit:r.limit}))},[]);return{products:p,pagination:f,loading:a,error:u,filters:o,setPage:c,setPageSize:h,updateFilters:d}}function fe(){const i=U(),[o,l]=t.useState(!1),[p,f]=t.useState(!1),[a,u]=t.useState({sortBy:"newest"}),[c,h]=t.useState([]),[d,n]=t.useState([]),{products:r,pagination:y,loading:x,error:E,setPage:L,setPageSize:T,updateFilters:A}=ee(a),v=t.useMemo(()=>r,[r]);t.useEffect(()=>{(async()=>{try{const[m,D]=await Promise.all([F.getCategories(),F.getBrands()]);h(m),n(D)}catch(m){console.error("Failed to load filter options:",m)}})()},[]);const j=s=>{const m={...a,...s};u(m),A(m)},M=s=>{j({search:s||void 0})};t.useEffect(()=>{a.search&&!x&&v&&_(a.search,v.length,"products")},[a.search,x,v]);const N=()=>{const s={sortBy:"newest"};u(s),A(s)},V=a.search||a.category||a.brand||a.minPrice!==void 0||a.maxPrice!==void 0;return e.jsxs(e.Fragment,{children:[e.jsx(X,{title:"Shop All Products",description:"Browse our curated collection of fashion from high-end to accessible brands. Find clothing, shoes, accessories, and more with detailed styling guides.",url:"http://localhost:3000/products"}),e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"container-custom mobile-container mobile-section",children:[e.jsx($,{title:"All Products",subtitle:"Discover our complete collection of curated fashion pieces",className:"mb-8 sm:mb-12"}),e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4",children:[e.jsx(W,{value:a.search||"",onChange:M,placeholder:"Search products, brands, or styles...",debounceMs:400,className:"flex-1"}),e.jsxs(S,{value:a.sortBy,onValueChange:s=>j({sortBy:s}),children:[e.jsx(w,{className:"w-full sm:w-48 h-11 touch-target",children:e.jsx(P,{placeholder:"Sort by..."})}),e.jsxs(C,{children:[e.jsx(g,{value:"newest",children:"Newest"}),e.jsx(g,{value:"price-low",children:"Price: Low to High"}),e.jsx(g,{value:"price-high",children:"Price: High to Low"}),e.jsx(g,{value:"name",children:"Name"})]})]}),e.jsxs(b,{variant:"outline",onClick:()=>l(!o),className:"w-full sm:w-auto touch-target h-11",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Filters"]})]}),o&&e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 sm:p-6 space-y-4 animate-fadeIn shadow-lg relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium text-base sm:text-lg",children:"Filters"}),e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>l(!1),className:"touch-target -mr-2",children:e.jsx(z,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium block",children:"Category"}),e.jsxs(S,{value:a.category||"all",onValueChange:s=>j({category:s==="all"?void 0:s}),children:[e.jsx(w,{className:"h-10 touch-target",children:e.jsx(P,{placeholder:"All categories"})}),e.jsxs(C,{className:"z-50",children:[e.jsx(g,{value:"all",children:"All categories"}),c.map(s=>{var m;return e.jsx(g,{value:s,children:((m=s==null?void 0:s.charAt(0))==null?void 0:m.toUpperCase())+(s==null?void 0:s.slice(1))},s)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium block",children:"Brand"}),e.jsxs(S,{value:a.brand||"all",onValueChange:s=>j({brand:s==="all"?void 0:s}),children:[e.jsx(w,{className:"h-10 touch-target",children:e.jsx(P,{placeholder:"All brands"})}),e.jsxs(C,{className:"z-50",children:[e.jsx(g,{value:"all",children:"All brands"}),d.map(s=>e.jsx(g,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium block",children:"Min Price"}),e.jsx(k,{type:"number",placeholder:"$0",value:a.minPrice||"",onChange:s=>j({minPrice:s.target.value?Number(s.target.value):void 0}),className:"h-10 touch-target"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium block",children:"Max Price"}),e.jsx(k,{type:"number",placeholder:"$1000",value:a.maxPrice||"",onChange:s=>j({maxPrice:s.target.value?Number(s.target.value):void 0}),className:"h-10 touch-target"})]})]}),V&&e.jsx("div",{className:"pt-4 border-t border-border",children:e.jsx(b,{variant:"outline",onClick:N,className:"w-full sm:w-auto touch-target",children:"Clear All Filters"})})]})]}),E&&e.jsxs("div",{className:"text-center py-12 sm:py-16",children:[e.jsx("p",{className:"text-base sm:text-lg text-muted-foreground mb-4",children:"No products found matching your criteria"}),e.jsx(b,{variant:"outline",className:"btn-mobile",onClick:N,children:"Clear Filters"})]}),x&&e.jsx("div",{className:"grid-mobile-products gap-4 sm:gap-6",children:[...Array(12)].map((s,m)=>e.jsx(q,{},m))}),!x&&!E&&e.jsx(e.Fragment,{children:v.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid-mobile-products gap-4 sm:gap-6 mb-8",children:v.map(s=>e.jsx(O,{product:s},s.id))}),e.jsx(G,{pagination:y,onPageChange:L,onPageSizeChange:T,showPageSize:!i,className:"mt-8 mb-12"})]}):e.jsxs("div",{className:"text-center py-12 sm:py-16",children:[e.jsx("p",{className:"text-base sm:text-lg text-muted-foreground mb-4",children:"No products found matching your criteria"}),e.jsx(b,{variant:"outline",className:"btn-mobile",onClick:N,children:"Clear Filters"})]})})]})})]})}export{fe as default};
